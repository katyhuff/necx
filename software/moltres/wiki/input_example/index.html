<!DOCTYPE html>
<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Example Input File</title>
    <meta name="viewport" content="width=device-width">
  <meta name="description" content="Website for the Strategic Instructional Innovations Program Project: Collaborative Open-Source Curiculum Development">

    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
  <link rel="stylesheet" href="/style.css">
  <link rel="canonical" href="http://arfc.github.io/cc/software/moltres/wiki/input_example/">
  <link rel="alternate" type="application/rss+xml" title="NECX" href="http://arfc.github.io/cc/feed.xml">
  <link rel="shortcut icon" href="http://arfc.github.io/cc/favicon.ico" />
    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


    <body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="logo" href="https://illinois.edu"><img 
                        class="img-responsive pull-left" 
                        src="http://identitystandards.illinois.edu/assets/images/i_mark_bold.png"></a>
                <a class="navbar-brand page-scroll" href="http://arfc.github.io/cc">NECX</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-collapse">
		      
    
    <li><a class="page-scroll nounderline" href="/award/" class="page-link">Award</a>
    <ul class="sub-menu">
    
    <li><a class="page-scroll nounderline" href="/award">Award</a></li>
    
    <li><a class="page-scroll nounderline" href="/award/people">People</a></li>
    
    <li><a class="page-scroll nounderline" href="/award/references/">References</a></li>
    
    </ul>
    
    </li>
    
    
    <li><a class="page-scroll nounderline" href="/kickoff/" class="page-link">Kick-Off</a>
    <ul class="sub-menu">
    
    <li><a class="page-scroll nounderline" href="/kickoff/agenda">Agenda</a></li>
    
    <li><a class="page-scroll nounderline" href="/kickoff/products">Products</a></li>
    
    </ul>
    
    </li>
    
    
    <li><a class="page-scroll nounderline" href="/interim/" class="page-link">Interim</a>
    <ul class="sub-menu">
    
    <li><a class="page-scroll nounderline" href="/interim/meetings">Meetings</a></li>
    
    <li><a class="page-scroll nounderline" href="/interim/products">Products</a></li>
    
    </ul>
    
    </li>
    
    
    <li><a class="page-scroll nounderline" href="/retrospective/" class="page-link">Retrospective</a>
    <ul class="sub-menu">
    
    <li><a class="page-scroll nounderline" href="/retrospective/agenda">Agenda</a></li>
    
    <li><a class="page-scroll nounderline" href="/retrospective/products">Products</a></li>
    
    </ul>
    
    </li>
    
    
    <li><a class="page-scroll nounderline" href="/manual/" class="page-link">Manual</a>
    <ul class="sub-menu">
    
    <li><a class="page-scroll nounderline" href="/manual/mission">Mission</a></li>
    
    <li><a class="page-scroll nounderline" href="/manual/diy">DIY</a></li>
    
    </ul>
    
    </li>
    

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="intro-text">
            </div>
        </div>
    </header>
<!--
        
          <a class="page-link" href="/retrospective/agenda">Retrospective Meeting Agenda</a>
        
          <a class="page-link" href="/kickoff/agenda">Kick-off Meeting Agenda</a>
        
          <a class="page-link" href="/award/">SIIP Award: Collaborative Open-Source Curriculum Development</a>
        
          <a class="page-link" href="/software/moltres/wiki/bcs/">Boundary Conditions</a>
        
          <a class="page-link" href="/manual/guides/bluewaters">Blue Waters</a>
        
          <a class="page-link" href="/manual/coc">Code of Conduct</a>
        
          <a class="page-link" href="/manual/guides/katy/codereq">Getting Software Help from Katy</a>
        
          <a class="page-link" href="/manual/guides/katy/commreq">Committee Involvement</a>
        
          <a class="page-link" href="/manual/guides/communication">Communication</a>
        
          <a class="page-link" href="/manual/expectations">Expectations</a>
        
          
        
          <a class="page-link" href="/manual/guides/">Guides</a>
        
          <a class="page-link" href="/">Nuclear Engineering Curriculum eXchange</a>
        
          <a class="page-link" href="/software/moltres/wiki/input_example/">Example Input File</a>
        
          <a class="page-link" href="/interim/">Interim Work</a>
        
          <a class="page-link" href="/software/moltres/wiki/kernels/">Kernels</a>
        
          <a class="page-link" href="/retrospective/">Retrospective Meeting</a>
        
          <a class="page-link" href="/kickoff/">Kick-off Meeting</a>
        
          <a class="page-link" href="/manual/">Laboratory Manual</a>
        
          <a class="page-link" href="/manual/guides/katy/meeting">Meeting with Katy</a>
        
          <a class="page-link" href="/manual/mission">Mission</a>
        
          <a class="page-link" href="/software/moltres/">Moltres</a>
        
          <a class="page-link" href="/award/people">People</a>
        
          <a class="page-link" href="/retrospective/products">Retrospective Meeting Products</a>
        
          <a class="page-link" href="/kickoff/products">Kick-off Meeting Products</a>
        
          <a class="page-link" href="/manual/guides/katy/recreq">How to ask for a letter of recommendation from Katy</a>
        
          <a class="page-link" href="/award/references/">References</a>
        
          <a class="page-link" href="/manual/guides/katy/revreq">Requesting a Review of Something</a>
        
          <a class="page-link" href="/software/">Software</a>
        
          
        
          <a class="page-link" href="/manual/guides/travel">Travel</a>
        
          <a class="page-link" href="/manual/guides/website">Website</a>
        
          <a class="page-link" href="/software/moltres/wiki/">Moltres Wiki</a>
        
          <a class="page-link" href="/manual/guides/zotero">Zotero</a>
        
 -->


    <div class="page-content">
      <div class="wrapper">
        <!-- Manual -->
    <section id="title" class="">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Example Input File</h2>
                    <h3 class="section-subheading text-muted"></h3>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-md-3">
                </div>
                <div class="col-md-6">
                        <p>The input file example used here is taken from<br />
<code class="highlighter-rouge">moltres/problems/MooseGold/033117_nts_temp_pre_parsed_mat/auto_diff_rho.i</code>. Before<br />
delving into the file, we note that all the parameter options for different<br />
input blocks can be seen by executing <code class="highlighter-rouge">moltres-opt --dump</code>.</p>

<p>Ok, from the top:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>flow_velocity=21.7 # cm/s. See MSRE-properties.ods
nt_scale=1e13
ini_temp=922
diri_temp=922
</code></pre>
</div>

<p>Variables defined at the top of an input file can be used throughout the<br />
remainder of the file with<br />
<a href="https://sourceforge.net/p/getpot/bugs/markdown_syntax">GetPot</a> syntax. We will<br />
show later in the input file an example of the GetPot syntax. Following the<br />
GetPot variables definitions, we have the <code class="highlighter-rouge">GlobalParams</code> block:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[GlobalParams]
  num_groups = 2
  num_precursor_groups = 6
  use_exp_form = false
  group_fluxes = 'group1 group2'
  temperature = temp
  sss2_input = false
  pre_concs = 'pre1 pre2 pre3 pre4 pre5 pre6'
  account_delayed = true
[]
</code></pre>
</div>

<p>In <code class="highlighter-rouge">GlobalParams</code>, parameters like <code class="highlighter-rouge">num_groups</code> can be globally set to a<br />
value. Consequently any class (e.g. the kernel class <code class="highlighter-rouge">GroupDiffusion</code>) that has<br />
the parameter <code class="highlighter-rouge">num_groups</code> will read in a value of <code class="highlighter-rouge">2</code> unless it is overridden<br />
locally in its input block. It should be noted that the <code class="highlighter-rouge">GlobalParams</code><br />
block and any other MOOSE input block can be placed anywhere in the input file;<br />
at execution time each block will be read when appropriate. Parameters<br />
description:</p>

<ul>
  <li><code class="highlighter-rouge">num_groups</code>: The number of energy groups for neutron diffusion</li>
  <li><code class="highlighter-rouge">num_precursor_groups</code>: The number of delayed neutron precursor groups</li>
  <li><code class="highlighter-rouge">use_exp_form</code>: Whether the actual neutron/precursor fluxes/concentrations<br />
should be represented by <script type="math/tex">u</script> or <script type="math/tex">e^u</script> where <script type="math/tex">u</script> is the actual variable<br />
value</li>
  <li><code class="highlighter-rouge">group_fluxes</code>: The names of the neutron group fluxes</li>
  <li><code class="highlighter-rouge">temperature</code>: The name of the temperature variable</li>
  <li><code class="highlighter-rouge">sss2_input</code>: True if the macroscopic group constants were generated by<br />
Serpent 2. False otherwise</li>
  <li><code class="highlighter-rouge">pre_concs</code>: The names of the precursor concentration variables</li>
  <li><code class="highlighter-rouge">account_delayed</code>: Whether to account for delayed neutron production. Modifies<br />
the neutron source term</li>
</ul>

<p>Following<br />
<code class="highlighter-rouge">GlobalParams</code> in our example, we have the <code class="highlighter-rouge">Mesh</code> block:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Mesh]
  file = '2d_lattice_structured.msh'
  # file = '2d_lattice_structured_jac.msh'
[]
</code></pre>
</div>

<p>Before describing the <code class="highlighter-rouge">Mesh</code> block, we note that comments in the Moltres input<br />
file can be introuduced with the <code class="highlighter-rouge">#</code> character. Any characters following the <code class="highlighter-rouge">#</code><br />
character will not be read by the MOOSE parser.</p>

<p>The two most commonly used <code class="highlighter-rouge">Mesh</code> types are <code class="highlighter-rouge">FileMesh</code> and <code class="highlighter-rouge">GeneratedMesh</code>. The<br />
<code class="highlighter-rouge">Mesh</code> input block by default assumes type <code class="highlighter-rouge">FileMesh</code> and takes a parameter<br />
argument <code class="highlighter-rouge">file = &lt;mesh_file_name&gt;</code>. Many MOOSE users generate their meshes using<br />
Cubit/Trellis. For national lab employees this software is free; however,<br />
academic or industry users must pay. Consequently, Moltres meshes to date have<br />
been generated using the software <a href="http://gmsh.info/">gmsh</a> which is free and<br />
open source. Binaries for Windows, Mac, and Linux as well as source code can be<br />
downloaded <a href="http://gmsh.info/#Download">here</a>. Ubuntu users may also install<br />
<code class="highlighter-rouge">gmsh</code> using <code class="highlighter-rouge">sudo apt-get install gmsh</code>. We will not go into the details of<br />
using <code class="highlighter-rouge">gmsh</code> but the interested user should peruse its<br />
<a href="http://gmsh.info/doc/texinfo/gmsh.html">documentation</a>. There are many example<br />
<code class="highlighter-rouge">gmsh</code> input files in the Moltres repository (denoted by the <code class="highlighter-rouge">.geo</code><br />
extension). To generate a mesh for use with Moltres, a typical bash command is<br />
<code class="highlighter-rouge">gmsh -2 -o file_name.msh file_name.geo</code> where <code class="highlighter-rouge">2</code> should be replaced with the<br />
dimension of the mesh, the argument following <code class="highlighter-rouge">-o</code> is the name of the output<br />
<code class="highlighter-rouge">.msh</code> file, and the last argument is the input <code class="highlighter-rouge">.geo</code> file.</p>

<p>Gmsh or Cubit can be used for generation of highly complex mesh<br />
structures. However, if the user just wishes to generate a simple mesh, he/she<br />
may use MOOSE’s built-in type <code class="highlighter-rouge">GeneratedMesh</code>. For using <code class="highlighter-rouge">GeneratedMesh</code> we<br />
refer the reader <a href="http://mooseframework.org/wiki/MooseSystems/Mesh/">here</a>.</p>

<p>Next in our example input file, we have the <code class="highlighter-rouge">Problem</code> block:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Problem]
  coord_type = RZ
[]
</code></pre>
</div>

<p>The <code class="highlighter-rouge">Problem</code> block may usually be omitted from the input file for a Cartesian<br />
simulation. However, since this particular example is using 2D-axisymmetric<br />
coordinates, we have to convey this information using <code class="highlighter-rouge">Problem</code>’s <code class="highlighter-rouge">coord_type</code><br />
parameter.</p>

<p>The <code class="highlighter-rouge">Variables</code> block introduces sub-blocks:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Variables]
  [./group1]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
  [./group2]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1
    scaling = 1e4
  [../]
  [./temp]
    initial_condition = ${ini_temp}
    scaling = 1e-4
  [../]
[]
</code></pre>
</div>

<p>Sub-blocks are initialized with <code class="highlighter-rouge">[./&lt;object_name&gt;]</code> and closed with <code class="highlighter-rouge">[../]</code>. The<br />
<code class="highlighter-rouge">group1</code> sub-block creates a <code class="highlighter-rouge">MooseVariable</code> object with the name <code class="highlighter-rouge">group1</code>. The<br />
<code class="highlighter-rouge">family</code> parameter describes the shape function type used to form the<br />
approximate finite element solution. The <code class="highlighter-rouge">order</code> parameter denotes the<br />
polynomial order of the shape functions. <code class="highlighter-rouge">initial_condition</code> is an optional<br />
parameter that can be used to set a spatially uniform initial value for the<br />
variable. <code class="highlighter-rouge">scaling</code> is another optional parameter that can be used to scale the<br />
residual of the corresponding variable; this is usually done when different<br />
variables have residuals of different orders of magnitude.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[PrecursorKernel]
  var_name_base = pre
  block = 'fuel'
  outlet_boundaries = 'fuel_tops'
  u_def = 0
  v_def = ${flow_velocity}
  w_def = 0
  nt_exp_form = false
  family = MONOMIAL
  order = CONSTANT
  # jac_test = true
[]
</code></pre>
</div>

<p>Whereas all the other blocks that have been introduced are standard MOOSE<br />
blocks, <code class="highlighter-rouge">PrecursorKernel</code> is a custom input file block unique to Moltres. The<br />
<code class="highlighter-rouge">PrecursorKernel</code> action creates all the precursor variables, kernels, and<br />
boundary conditions necessary for solving the precursor governing<br />
equations. Parameter descriptions:</p>

<ul>
  <li><code class="highlighter-rouge">var_name_base</code>: The prefix for the precursor variable names. Name suffixes are<br />
numbers, e.g. <code class="highlighter-rouge">pre1, pre2, ...</code></li>
  <li><code class="highlighter-rouge">block</code>: This is a parameter ubiquitous to many MOOSE classes such as kernels<br />
and materials. By specifying a value for <code class="highlighter-rouge">block</code> the user is asking that in<br />
this case, precursors and their associated governing equations only be<br />
solved for in the <code class="highlighter-rouge">fuel</code> mesh subdomains</li>
  <li><code class="highlighter-rouge">outlet_boundaries</code>: The mesh boundaries from which the precursors flow out</li>
  <li><code class="highlighter-rouge">u_def, v_def, w_def</code>: The x, y, and z components of velocity, or in the case<br />
of an RZ simulation, <code class="highlighter-rouge">u_def</code> is the r velocity component, <code class="highlighter-rouge">v_def</code> is the<br />
z-component, and <code class="highlighter-rouge">w_def</code> has no meaning</li>
  <li><code class="highlighter-rouge">nt_exp_form</code>: Whether the neutron group fluxes have their concentrations in<br />
an exponential form. If <code class="highlighter-rouge">use_exp_form</code> is false in the <code class="highlighter-rouge">GlobalParams</code> block,<br />
this should also be false</li>
  <li><code class="highlighter-rouge">jac_test</code>: true if testing the application developer’s jacobian against a<br />
jacobian formed through finite differencing of the residuals. Defaults to<br />
false.</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>[Kernels]
  # Neutronics
  [./time_group1]
    type = NtTimeDerivative
    variable = group1
    group_number = 1
  [../]
  [./diff_group1]
    type = GroupDiffusion
    variable = group1
    group_number = 1
  [../]
  [./sigma_r_group1]
    type = SigmaR
    variable = group1
    group_number = 1
  [../]
  [./fission_source_group1]
    type = CoupledFissionKernel
    variable = group1
    group_number = 1
  [../]
  [./delayed_group1]
    type = DelayedNeutronSource
    variable = group1
  [../]
  [./inscatter_group1]
    type = InScatter
    variable = group1
    group_number = 1
  [../]
  [./diff_group2]
    type = GroupDiffusion
    variable = group2
    group_number = 2
  [../]
  [./sigma_r_group2]
    type = SigmaR
    variable = group2
    group_number = 2
  [../]
  [./time_group2]
    type = NtTimeDerivative
    variable = group2
    group_number = 2
  [../]
  [./fission_source_group2]
    type = CoupledFissionKernel
    variable = group2
    group_number = 2
  [../]
  [./inscatter_group2]
    type = InScatter
    variable = group2
    group_number = 2
  [../]

  # Temperature
  [./temp_time_derivative]
    type = MatINSTemperatureTimeDerivative
    variable = temp
  [../]
  [./temp_source_fuel]
    type = TransientFissionHeatSource
    variable = temp
    nt_scale=${nt_scale}
    block = 'fuel'
  [../]
  # [./temp_source_mod]
  #   type = GammaHeatSource
  #   variable = temp
  #   gamma = .0144 # Cammi .0144
  #   block = 'moder'
  #   average_fission_heat = 'average_fission_heat'
  # [../]
  [./temp_diffusion]
    type = MatDiffusion
    D_name = 'k'
    variable = temp
  [../]
  [./temp_advection_fuel]
    type = ConservativeTemperatureAdvection
    velocity = '0 ${flow_velocity} 0'
    variable = temp
    block = 'fuel'
  [../]
[]
</code></pre>
</div>

<p>The <code class="highlighter-rouge">Kernels</code> block is pretty straightforward. The kernel type or class is<br />
specified with <code class="highlighter-rouge">type = &lt;kernel_type&gt;</code>. The mathematical representation of each<br />
Moltres kernel type can be found on the<br />
<a href="/software/moltres/wiki/kernels">kernel wiki page</a>. Each kernel contributes to<br />
the residual of the variable specified by <code class="highlighter-rouge">variable = &lt;variable_name&gt;</code>. Kernels<br />
can be optionally block restricted by setting <code class="highlighter-rouge">block = &lt;subdomain_names&gt;</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[BCs]
  [./vacuum_group1]
    type = VacuumConcBC
    boundary = 'fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall'
    variable = group1
  [../]
  [./vacuum_group2]
    type = VacuumConcBC
    boundary = 'fuel_bottoms fuel_tops moder_bottoms moder_tops outer_wall'
    variable = group2
  [../]
  [./temp_diri_cg]
    boundary = 'moder_bottoms fuel_bottoms outer_wall'
    type = FunctionDirichletBC
    function = 'temp_bc_func'
    variable = temp
  [../]
  [./temp_advection_outlet]
    boundary = 'fuel_tops'
    type = TemperatureOutflowBC
    variable = temp
    velocity = '0 ${flow_velocity} 0'
  [../]
[]
</code></pre>
</div>

<p>The <code class="highlighter-rouge">BCs</code> block is very similar to the <code class="highlighter-rouge">Kernels</code> block except the<br />
<code class="highlighter-rouge">boundary = &lt;boundary_names&gt;</code> parameter must be specified to indicate where the boundary<br />
conditions should be applied. The mathematical form of the BCs can be found on<br />
the <a href="/software/moltres/wiki/kernels">BCs wiki page</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Functions]
  [./temp_bc_func]
    type = ParsedFunction
    value = '${ini_temp} - (${ini_temp} - ${diri_temp}) * tanh(t/1e-2)'
  [../]
[]
</code></pre>
</div>

<p>The <code class="highlighter-rouge">Functions</code> block is necessary when other MOOSE/Moltres objects specified in<br />
the input file require functions. In this example we have a boundary condition<br />
object <code class="highlighter-rouge">temp_diri_cg</code> of type <code class="highlighter-rouge">FunctionDirichletBC</code> that requires a function<br />
object to specify the values of the variable <code class="highlighter-rouge">temp</code> along the reactor<br />
boundaries. We name this function object <code class="highlighter-rouge">temp_bc_func</code> and specify it to be of<br />
type <code class="highlighter-rouge">ParsedFunction</code> which is a function type that can be written in terms of<br />
constants and the independent variables <script type="math/tex">x, y, z</script> and <script type="math/tex">t</script>. Here we see the<br />
use of GetPot syntax <code class="highlighter-rouge">${&lt;variable_name&gt;}$</code> to access the values of <code class="highlighter-rouge">ini_temp</code> and<br />
<code class="highlighter-rouge">diri_temp</code> specified at the top of the input file.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Materials]
  [./fuel]
    type = GenericMoltresMaterial
    property_tables_root = '../property_file_dir/newt_msre_fuel_'
    interp_type = 'spline'
    block = 'fuel'
    prop_names = 'k cp'
    prop_values = '.0553 1967' # Robertson MSRE technical report @ 922 K
  [../]
  [./rho_fuel]
    type = DerivativeParsedMaterial
    f_name = rho
    function = '2.146e-3 * exp(-1.8 * 1.18e-4 * (temp - 922))'
    args = 'temp'
    derivative_order = 1
    block = 'fuel'
  [../]
  [./moder]
    type = GenericMoltresMaterial
    property_tables_root = '../property_file_dir/newt_msre_mod_'
    interp_type = 'spline'
    prop_names = 'k cp'
    prop_values = '.312 1760' # Cammi 2011 at 908 K
    block = 'moder'
  [../]
  [./rho_moder]
    type = DerivativeParsedMaterial
    f_name = rho
    function = '1.86e-3 * exp(-1.8 * 1.0e-5 * (temp - 922))'
    args = 'temp'
    derivative_order = 1
    block = 'moder'
  [../]
[]
</code></pre>
</div>

<p>In the <code class="highlighter-rouge">Materials</code> block we specify materials that live on a mesh<br />
subdomain. Any given subdomain can have as many materials as desired. An<br />
important material in Moltres is <code class="highlighter-rouge">GenericMoltresMaterial</code>. Its parameters:</p>

<ul>
  <li><code class="highlighter-rouge">property_tables_root</code>: The path and prefix of the files that contain the<br />
macroscopic group constants that define neutron reaction rates</li>
  <li><code class="highlighter-rouge">interp_type</code>: The type of fitting/interpolation to be carried out on the<br />
temperature grid. Options are:
    <ul>
      <li><code class="highlighter-rouge">bicubic_spline</code>: Done when macroscopic constants are a function of the<br />
temperature of the local material as well as the average temperature of<br />
the other material</li>
      <li><code class="highlighter-rouge">spline</code>: Most common option used for monovariate interpolation between<br />
temperature knots</li>
      <li><code class="highlighter-rouge">least_squares</code>: Constructs a linear fit function of macroscopic constants<br />
as a function of temperature. Useful when group constant interpolation<br />
table is not monotonic</li>
      <li><code class="highlighter-rouge">none</code>: Only should be used when single values for constants are supplied<br />
at a single temperature</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">prop_names, prop_values</code>: name-value pairs used to define material property<br />
values from the input file. In this example, both the thermal conductivity<br />
<script type="math/tex">k</script> and the specific heat capacity <script type="math/tex">c_p</script> are defined from the input file<br />
for both fuel and moderator subdomains.</li>
</ul>

<p><code class="highlighter-rouge">DerivativeParsedMaterial</code> is a material inherited from the Phase Field module<br />
of the MOOSE framework. Its useful for creating material properties that are<br />
functions of solution variables and for coupling the dependency of the property<br />
on the variable back into the Jacobian used for Newton-Raphson. A more in-depth<br />
description of the material along with its relatives is given<br />
<a href="http://mooseframework.org/wiki/PhysicsModules/PhaseField/DevelopingModels/FunctionMaterials/">here</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Executioner]
  type = Transient
  end_time = 10000

  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6

  solve_type = 'NEWTON'
  petsc_options = '-snes_converged_reason -ksp_converged_reason -snes_linesearch_monitor'
  petsc_options_iname = '-pc_type -sub_pc_type -pc_asm_overlap -sub_ksp_type -snes_linesearch_minlambda'
  petsc_options_value = 'asm	  lu	       1	       preonly	     1e-3'
  # petsc_options_iname = '-snes_type'
  # petsc_options_value = 'test'

  nl_max_its = 30
  l_max_its = 100

  dtmin = 1e-5
  # dtmax = 1
  # dt = 1e-3
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 1e-3
    cutback_factor = 0.4
    growth_factor = 1.2
    optimal_iterations = 20
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]
</code></pre>
</div>

<p>The <code class="highlighter-rouge">Executioner</code> and <code class="highlighter-rouge">Preconditioning</code> blocks are essential to determining the<br />
method used to solve the system of non-linear equations created by finite<br />
element discretization of our molten salt reactor governing<br />
equations. <code class="highlighter-rouge">Executioner</code> and <code class="highlighter-rouge">Preconditioning</code> documentation can be found<br />
<a href="http://mooseframework.org/wiki/MooseSystems/Executioners/">here</a> and<br />
<a href="http://mooseframework.org/wiki/MooseSystems/Preconditioners/">here</a><br />
respectively.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Postprocessors]
  [./group1_current]
    type = IntegralNewVariablePostprocessor
    variable = group1
    outputs = 'console csv'
  [../]
  [./group1_old]
    type = IntegralOldVariablePostprocessor
    variable = group1
    outputs = 'console csv'
  [../]
  [./multiplication]
    type = DivisionPostprocessor
    value1 = group1_current
    value2 = group1_old
    outputs = 'console csv'
  [../]
  [./temp_fuel]
    type = ElementAverageValue
    variable = temp
    block = 'fuel'
    outputs = 'csv console'
  [../]
  [./temp_moder]
    type = ElementAverageValue
    variable = temp
    block = 'moder'
    outputs = 'csv console'
  [../]
  # [./average_fission_heat]
  #   type = AverageFissionHeat
  #   nt_scale = ${nt_scale}
  #   execute_on = 'linear nonlinear'
  #   outputs = 'console'
  #   block = 'fuel'
  # [../]
[]
</code></pre>
</div>

<p>General postprocessor documentation can be found<br />
<a href="http://mooseframework.org/wiki/MooseSystems/Postprocessors/">here</a>. In this<br />
example, the first three postprocessors <code class="highlighter-rouge">group1_current, group1_old</code> and<br />
<code class="highlighter-rouge">multiplication</code> are used to calculate the neutron multiplication between<br />
current and old timesteps. The <code class="highlighter-rouge">IntegralNewVariablePostprocessor</code> integrates the<br />
supplied variable’s value over the entire domain at the current time step. The<br />
<code class="highlighter-rouge">IntegralOldVariablePostprocessor</code> does the same thing but for the previous<br />
time-step. The <code class="highlighter-rouge">DivisionPostprocessor</code> then divides <code class="highlighter-rouge">value1</code> by <code class="highlighter-rouge">value2</code>. The<br />
<code class="highlighter-rouge">ElementAverageValue</code> postprocessor simply calculates the average value of a<br />
variable over an optionally restricted domain. <code class="highlighter-rouge">AverageFissionHeat</code>, commented<br />
out in this example, determines the average volumetric fission heating rate over<br />
a domain. This has been used to implement gamma radiation heating in the<br />
moderator as some fraction of the average fission heat produced in the fuel.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Outputs]
  print_perf_log = true
  print_linear_residuals = true
  csv = true
  [./out]
    type = Exodus
  [../]
[]
</code></pre>
</div>

<p><code class="highlighter-rouge">Outputs</code> documentation is<br />
<a href="http://mooseframework.org/wiki/MooseSystems/Outputs/">here</a>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[Debug]
  show_var_residual_norms = true
[]
</code></pre>
</div>

<p>This simply tells our executable to print the variable residual norms during the<br />
non-linear solve.</p>

<div class="highlighter-rouge"><pre class="highlight"><code># [ICs]
#   [./temp_ic]
#     type = RandomIC
#     variable = temp
#     min = 922
#     max = 1022
#   [../]
#   [./group1_ic]
#     type = RandomIC
#     variable = group1
#     min = .5
#     max = 1.5
#   [../]
#   [./group2_ic]
#     type = RandomIC
#     variable = group2
#     min = .5
#     max = 1.5
#   [../]
# []
</code></pre>
</div>

<p>The <code class="highlighter-rouge">ICs</code> block can be used to construct variable initial<br />
conditions. Documentation is<br />
<a href="http://mooseframework.org/wiki/MooseSystems/ICs/">here</a>. The commented out<br />
<code class="highlighter-rouge">ICs</code> in this particular file are sometimes used to test the Jacobians of new<br />
kernels and boundary conditions introduced into Moltres.</p>

                </div>
                <div class="col-md-3">
                </div>
            </div>
        </div>
    </div>
    </section>
    


      </div>
    </div>

      <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <ul class="list-inline social-buttons">
                        
                        <li class="social-button-item"><a href="https://arfc.github.io/feed.xml"><i class="fa fa-rss"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="https://calendar.google.com/calendar/embed?src=v3ih5p16gub2a2q32t23pv4esc%40group.calendar.google.com&ctz=America/Winnipeg"><i class="fa fa-calendar"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="https://www.google.com/maps/d/edit?mid=zwJ5Sc8HIDN4.k3fYHsg-biWE&usp=sharing"><i class="fa fa-map-marker"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="mailto:kdhuff@illinois.edu"><i class="fa fa-envelope-o"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="http://figshare.com/authors/Kathryn_Huff/417852"><i class="fa fa-paperclip"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="https://github.com/arfc"><i class="fa fa-github-alt"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="http://scholar.google.com/citations?user=rD2qRk8AAAAJ"><i class="fa fa-graduation-cap"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="https://twitter.com/katyhuff"><i class="fa fa-twitter"></i></a>
                        </li>
                        
                        <li class="social-button-item"><a href="http://www.zotero.org/groups/arfc"><i class="fa fa-paperclip"></i></a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </footer>

     <!-- Portfolio Modals -->
 
    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Jin Whan Bae Recognized for Outstanding Undergraduate Research</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Kathryn Mummah Rakes in Awards</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>New Group Members Join ARFC</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Huff Featured in NPRE News</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>ARFC and ERGS Receive NEUP R&D Award</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="portfolio-modal modal fade" id="portfolioModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Huff Plans to Join NPRE</h2>
                            <hr class="star-primary">
                            <img src="" class="img-responsive img-centered" alt="">
                            <p></p>
                            <ul class="list-inline item-details">
                                <li>Client:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Date:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                                <li>Service:
                                    <strong><a href="http://startbootstrap.com"></a>
                                    </strong>
                                </li>
                            </ul>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="/js/jqBootstrapValidation.js"></script>
    <script src="/js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/js/agency.js"></script>


  </body>

</html>
